<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <link rel="stylesheet" href=" project 12 quiz.css">
</head>
<body>
    <h1>Quiz App</h1>
    <div id="quiz-container">
    <p id="question"></p>
    <div id="option"></div>
    <p>Time left: <span id ="timer">10</span></p>
    <p>Score <span id="Score"0></span></p>

    </div><br>
    <button>Start Quiz</button>
    <button>view Score</button>
</body>
<script>
    const quizdata =[{
        question:"Which language runs in a web browser?",
        options: ["Java","c","Python","JavaScript"],
        answer: "JavaScript"},
        {
            question: "What does css Stands for?",
            options:["Central Style Steets","Cascading Style Steets","Computer Style Steets"],
            answer:"Cascading Style Steets"}];
        let score = 0;
        let currentIndex =0;
        let timeleft =10;
        let timer;
         function fetchQuizData(){
            return new promise((resolve)=>{
                setTimeout(()=>resolve(quizdata),1000);
            });
         
    }
    async function StartQuiz(){
        score = 0;
        currentIndex = 0;
        const question =  await fetchQuizData();
        loadQuestion(question);

    }
    function loadQuestion(question){
        if(currentIndex >= question.length){
            endQuiz();
            return;
        }
    }
    const{question,options,answer}= question[currentIndex];
    document.getElementById("question").innerText=question;
    const optionsDiv = document.getElementById("options");
    optionsDiv.innerHTML= "";
    options.forEach(opt => {
        const btn = document.createElement("button");
        btn.innerText = opt;
        btn.className ="option";
        btn.onclick= ()=>checkAnswer(opt,answer,question);
        optionsDiv.appendChild(btn);
    });
    timeleft = 10;
        document.getElementById("timer").innerText = timeleft;
        clearInterval(timer);
        timer = setInterval(()=>{
            timeleft--;
            document.getElementById("timer").innerText=timeleft;
            if(timeleft===0){
                clearInterval(timer);
                nextQuestion(questions);
            }
        },1000);}
    
    function checkAnswer (selected,correct,question){
        if( selected===correct){
            score++;
            document.getElementById("score").innerText = score;
        }
        nextQuestion(questions);
    }
    function nextQuestion(questions){
        currentIndex++;
        loadQuestion(questions);
    }
    function endQuiz(){
        clearInterval(timer);
        alert(`Quiz Over! Your Score: ${Score}`);
        let pastScores = JSON.parse(localStorage.getItem("quizScores"))||[];
        localStorage.setItem("quizScores",JSON.stringify(pastScores));

    }
    function viewScores(){
        let pastScores=JSON.parse(localStorage.getItem("quizScores"))|| [];
        alert('pas Scores: $ (pastScores.join(",")}');

    }
    </script>

</html>